doctype html
html(lang="ja")
  head
    meta(charset="UTF-8")
    title NNチャット
    link(rel="stylesheet",
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css",
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC",
    crossorigin="anonymous")
  body.container(style={ "padding-top": "70px", "padding-bottom": "200px", "overflow": "scroll" })#container
    nav.navbar.fixed-top.navbar-dark.bg-primary
      div.container-fluid
        h1.text-light.navbar-brand.mx-auto NNチャット<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16"><path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg>
        div
          a(href="/logout").btn.btn-outline-light ログアウト
    each post in posts
      - let cardClass = (user === post.postedBy ? 'card border-primary mb-3' : 'card my-3')
      div(class=cardClass)
        div.card-body
          div.d-flex.justify-content-between
            h5.card-title #{post.postedBy}
            small.card-text.text-muted.float-end #{post.createdAt}
          p.card-text.lead!=post.content
        - let isDeletable = (user === post.postedBy || user === 'admin')
          if isDeletable
            div.card-footer.d-flex.justify-content-end
              form(method="post" action="/posts/delete")
                input(type="hidden" name="id" value=post.id)
                button(type="submit").btn.btn-outline-danger.btn-sm <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/></svg>
    nav.fixed-bottom.p-4.bg-light 
      form(method="post" action="/posts").container-fluid.row.g-3
        div.col-12
          textarea(name="content" rows="4").form-control
        div.col-12
          button(type="submit").btn.btn-primary.float-end <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-send" viewBox="0 0 16 16"><path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"/></svg>

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js",
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM",
    crossorigin="anonymous")

    script.
      window.onload = function() {
        window.scrollTo(0,document.body.scrollHeight);
      }